/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package br.com.parks;

import br.com.parks.entity.OLT;
import br.com.parks.entity.ONU;
import br.com.parks.util.ControllerOnu;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JTabbedPane;

/**
 *
 * @author tiago
 */
public class OnuPanel extends javax.swing.JPanel {

    private ExecutorService svc = Executors.newFixedThreadPool(1);
    private final JTabbedPane panel;
    private ControllerOnu cOnu;
    private ONU onu;
    private OLT olt;
    private boolean connected =false ;
    private boolean stopOnu=true;
    

    /**
     * Creates new form OnuPanel
     *
     * @param panel
     */
    public OnuPanel(JTabbedPane panel) {
        this.panel = panel;
        initComponents();
    }

    public OnuPanel(JTabbedPane panel, final ONU onu, OLT olt) {
        this.panel = panel;
        initComponents();
        this.onu = onu;
        this.olt = olt;
        txtPass.setText("parks");
        cOnu=new ControllerOnu(onu);
        fillFields();
        
//        svc.submit(new Runnable() {
//
//            @Override
//            public void run() {
//                ControllerOnu cOnut=new ControllerOnu();
//                while (stopOnu) { 
//                    connected=cOnut.connect();
//                    try {
//                        if(connected){
//                            lbStatusCon.setText("Connected");
//                            System.out.println("Connected");
//                        }else{
//                            lbStatusCon.setText("Disconnected");
//                            System.out.println("Disconnected");
//                        }
//                        Thread.sleep(2000L);
//                    } catch (InterruptedException ex) {
//                      //  Logger.getLogger(OnuPanel.class.getName()).log(Level.SEVERE, null, ex);
//                    }
//                }
//            }
//        });
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        txtPass = new javax.swing.JPasswordField();
        lbSerial = new javax.swing.JLabel();
        txtSerial = new javax.swing.JTextField();
        lbPass = new javax.swing.JLabel();
        pnOnuProv = new javax.swing.JPanel();
        txtAlias = new javax.swing.JTextField();
        lbAlias = new javax.swing.JLabel();
        lbMgmtIP = new javax.swing.JLabel();
        txtMgmtIP = new javax.swing.JTextField();
        cbFlowProfile = new javax.swing.JComboBox();
        lbFlowProfile = new javax.swing.JLabel();
        lbVtpIpHost = new javax.swing.JLabel();
        cbVtpIpHost = new javax.swing.JComboBox();
        cbVtpVeip = new javax.swing.JComboBox();
        lbVtpVeip = new javax.swing.JLabel();
        cbVtpPbmp = new javax.swing.JComboBox();
        lbVtpPbmp = new javax.swing.JLabel();
        btProvisioning = new javax.swing.JButton();
        jCheckBox1 = new javax.swing.JCheckBox();
        btReload = new javax.swing.JButton();
        pnOnuConf = new javax.swing.JPanel();
        txtLanIp = new javax.swing.JTextField();
        lbLanIp = new javax.swing.JLabel();
        txtDhcpRangeFirst = new javax.swing.JTextField();
        lbDhcpRangeFirst = new javax.swing.JLabel();
        txtDhcpRangeLast = new javax.swing.JTextField();
        lbDhcpRangeLast = new javax.swing.JLabel();
        ckbNat = new javax.swing.JCheckBox();
        ckbDhcp = new javax.swing.JCheckBox();
        ckbPPPoE = new javax.swing.JLabel();
        btConfig = new javax.swing.JButton();
        jTextField7 = new javax.swing.JTextField();
        jTextField8 = new javax.swing.JTextField();
        jLabel14 = new javax.swing.JLabel();
        jCheckBox3 = new javax.swing.JCheckBox();
        jLabel15 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jTextField9 = new javax.swing.JTextField();
        jPasswordField2 = new javax.swing.JPasswordField();
        lbStatusCon = new javax.swing.JLabel();
        jButton4 = new javax.swing.JButton();
        btClose = new javax.swing.JButton();

        setPreferredSize(new java.awt.Dimension(669, 483));

        txtPass.setText("parks");

        lbSerial.setText("Serial:");

        txtSerial.setEditable(false);
        txtSerial.setBackground(new java.awt.Color(176, 176, 176));
        txtSerial.setForeground(new java.awt.Color(109, 109, 109));
        txtSerial.setSelectedTextColor(new java.awt.Color(195, 195, 195));

        lbPass.setText("Pass:");

        pnOnuProv.setBorder(javax.swing.BorderFactory.createTitledBorder("ONU Provisioning"));

        lbAlias.setText("Alias:");

        lbMgmtIP.setText("Mgmt IP:");

        cbFlowProfile.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "--" }));
        cbFlowProfile.setEnabled(false);

        lbFlowProfile.setText("Flow Profile:");

        lbVtpIpHost.setText("VTP IPHOST:");

        cbVtpIpHost.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "--" }));
        cbVtpIpHost.setEnabled(false);

        cbVtpVeip.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "--" }));
        cbVtpVeip.setEnabled(false);

        lbVtpVeip.setText("VTP VEIP:");

        cbVtpPbmp.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "--" }));
        cbVtpPbmp.setEnabled(false);

        lbVtpPbmp.setText("VTP PBMP:");

        btProvisioning.setText("Provisioning");

        jCheckBox1.setText("Bridge");

        javax.swing.GroupLayout pnOnuProvLayout = new javax.swing.GroupLayout(pnOnuProv);
        pnOnuProv.setLayout(pnOnuProvLayout);
        pnOnuProvLayout.setHorizontalGroup(
            pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnOnuProvLayout.createSequentialGroup()
                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnOnuProvLayout.createSequentialGroup()
                        .addGap(21, 21, 21)
                        .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(lbVtpPbmp)
                            .addGroup(pnOnuProvLayout.createSequentialGroup()
                                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(lbMgmtIP)
                                    .addComponent(lbAlias))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addGroup(pnOnuProvLayout.createSequentialGroup()
                                        .addComponent(jCheckBox1)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(lbVtpVeip))
                                    .addGroup(pnOnuProvLayout.createSequentialGroup()
                                        .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(txtMgmtIP, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(txtAlias, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(lbFlowProfile)
                                            .addComponent(lbVtpIpHost))))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(cbVtpPbmp, 0, 228, Short.MAX_VALUE)
                            .addComponent(cbVtpVeip, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(cbFlowProfile, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(cbVtpIpHost, javax.swing.GroupLayout.Alignment.TRAILING, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnOnuProvLayout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btProvisioning)))
                .addContainerGap())
        );
        pnOnuProvLayout.setVerticalGroup(
            pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnOnuProvLayout.createSequentialGroup()
                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtAlias, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbAlias)
                    .addComponent(cbFlowProfile, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbFlowProfile))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lbMgmtIP)
                    .addComponent(lbVtpIpHost)
                    .addComponent(cbVtpIpHost, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtMgmtIP, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cbVtpVeip, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbVtpVeip)
                    .addComponent(jCheckBox1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuProvLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cbVtpPbmp, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbVtpPbmp))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btProvisioning)
                .addContainerGap())
        );

        btReload.setText("Reload");
        btReload.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btReloadActionPerformed(evt);
            }
        });

        pnOnuConf.setBorder(javax.swing.BorderFactory.createTitledBorder("ONU Config"));

        lbLanIp.setText("LAN IP:");

        txtDhcpRangeFirst.setEnabled(false);

        lbDhcpRangeFirst.setText("DHCP Range:");

        txtDhcpRangeLast.setEnabled(false);

        lbDhcpRangeLast.setText("Last IP Range:");

        ckbNat.setText("NAT");

        ckbDhcp.setText("DHCP WAN");

        ckbPPPoE.setText("WAN IP:");

        btConfig.setText("Config");

        jLabel14.setText("Def. GW:");

        jCheckBox3.setText("PPPoE");

        jLabel15.setText("User:");

        jLabel16.setText("Pass:");

        jTextField9.setEnabled(false);

        jPasswordField2.setEnabled(false);

        javax.swing.GroupLayout pnOnuConfLayout = new javax.swing.GroupLayout(pnOnuConf);
        pnOnuConf.setLayout(pnOnuConfLayout);
        pnOnuConfLayout.setHorizontalGroup(
            pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnOnuConfLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(ckbPPPoE)
                    .addComponent(jLabel14)
                    .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(ckbNat)
                        .addComponent(lbLanIp)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnOnuConfLayout.createSequentialGroup()
                        .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addGroup(pnOnuConfLayout.createSequentialGroup()
                                .addComponent(txtLanIp, javax.swing.GroupLayout.PREFERRED_SIZE, 218, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(lbDhcpRangeFirst))
                            .addGroup(pnOnuConfLayout.createSequentialGroup()
                                .addComponent(ckbDhcp)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jCheckBox3)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(lbDhcpRangeLast)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtDhcpRangeLast)
                            .addComponent(txtDhcpRangeFirst)))
                    .addGroup(pnOnuConfLayout.createSequentialGroup()
                        .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jTextField8, javax.swing.GroupLayout.DEFAULT_SIZE, 215, Short.MAX_VALUE)
                            .addComponent(jTextField7))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnOnuConfLayout.createSequentialGroup()
                                .addComponent(jLabel15)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jTextField9, javax.swing.GroupLayout.PREFERRED_SIZE, 190, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addGroup(pnOnuConfLayout.createSequentialGroup()
                                .addComponent(jLabel16)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jPasswordField2, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(btConfig)))))
                .addContainerGap())
        );
        pnOnuConfLayout.setVerticalGroup(
            pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnOnuConfLayout.createSequentialGroup()
                .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lbLanIp)
                    .addComponent(txtLanIp, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtDhcpRangeFirst, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbDhcpRangeFirst))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtDhcpRangeLast, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbDhcpRangeLast)
                    .addComponent(ckbNat)
                    .addComponent(ckbDhcp)
                    .addComponent(jCheckBox3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(ckbPPPoE)
                    .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel15)
                    .addComponent(jTextField9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnOnuConfLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel14)
                    .addComponent(jLabel16)
                    .addComponent(jPasswordField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btConfig))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        lbStatusCon.setText("Ok");

        jButton4.setText("Provisioning+Config");

        btClose.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/DeleteRed2.png"))); // NOI18N
        btClose.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btCloseActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pnOnuConf, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(pnOnuProv, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lbSerial)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtSerial, javax.swing.GroupLayout.PREFERRED_SIZE, 136, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lbPass)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtPass, javax.swing.GroupLayout.PREFERRED_SIZE, 155, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lbStatusCon)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btReload))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btClose, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lbSerial)
                    .addComponent(txtSerial, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbPass)
                    .addComponent(txtPass, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btReload)
                    .addComponent(lbStatusCon))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnOnuProv, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnOnuConf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 13, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jButton4, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btClose, javax.swing.GroupLayout.Alignment.TRAILING))
                .addContainerGap())
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btCloseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btCloseActionPerformed
        try {
            stopOnu = false;
            svc.shutdownNow();
            svc.awaitTermination(1L, TimeUnit.SECONDS);
            panel.remove(panel.indexOfComponent(this));
        } catch (InterruptedException ex) {
            Logger.getLogger(OnuPanel.class.getName()).log(Level.SEVERE, null, ex);
        }

    }//GEN-LAST:event_btCloseActionPerformed

    private void btReloadActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btReloadActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btReloadActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btClose;
    private javax.swing.JButton btConfig;
    private javax.swing.JButton btProvisioning;
    private javax.swing.JButton btReload;
    private javax.swing.JComboBox cbFlowProfile;
    private javax.swing.JComboBox cbVtpIpHost;
    private javax.swing.JComboBox cbVtpPbmp;
    private javax.swing.JComboBox cbVtpVeip;
    private javax.swing.JCheckBox ckbDhcp;
    private javax.swing.JCheckBox ckbNat;
    private javax.swing.JLabel ckbPPPoE;
    private javax.swing.JButton jButton4;
    private javax.swing.JCheckBox jCheckBox1;
    private javax.swing.JCheckBox jCheckBox3;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JPasswordField jPasswordField2;
    private javax.swing.JTextField jTextField7;
    private javax.swing.JTextField jTextField8;
    private javax.swing.JTextField jTextField9;
    private javax.swing.JLabel lbAlias;
    private javax.swing.JLabel lbDhcpRangeFirst;
    private javax.swing.JLabel lbDhcpRangeLast;
    private javax.swing.JLabel lbFlowProfile;
    private javax.swing.JLabel lbLanIp;
    private javax.swing.JLabel lbMgmtIP;
    private javax.swing.JLabel lbPass;
    private javax.swing.JLabel lbSerial;
    private javax.swing.JLabel lbStatusCon;
    private javax.swing.JLabel lbVtpIpHost;
    private javax.swing.JLabel lbVtpPbmp;
    private javax.swing.JLabel lbVtpVeip;
    private javax.swing.JPanel pnOnuConf;
    private javax.swing.JPanel pnOnuProv;
    private javax.swing.JTextField txtAlias;
    private javax.swing.JTextField txtDhcpRangeFirst;
    private javax.swing.JTextField txtDhcpRangeLast;
    private javax.swing.JTextField txtLanIp;
    private javax.swing.JTextField txtMgmtIP;
    private javax.swing.JPasswordField txtPass;
    private javax.swing.JTextField txtSerial;
    // End of variables declaration//GEN-END:variables

    private void fillFields() {
        txtSerial.setText(onu.getSerial());
        txtPass.setText(onu.getPass());
        txtAlias.setText(onu.getAlias());
        txtMgmtIP.setText(onu.getMgmtIp());
        for (String fp : olt.getFlowProfiles()) {
            cbFlowProfile.addItem(fp);
            if (onu.getFlowProfile() != null && onu.getFlowProfile().equals(fp)) {
                cbFlowProfile.setSelectedItem(fp);
            }
        }
        for (String vt : olt.getVlanTranslate()) {
            String[] vtl = vt.split(",");
            cbVtpIpHost.addItem(vtl[0]);
            cbVtpVeip.addItem(vtl[0]);
            cbVtpPbmp.addItem("P1: " + vtl[0] + ";");
            cbVtpPbmp.addItem("P2: " + vtl[0] + ";");
            cbVtpPbmp.addItem("P1: " + vtl[0] + ";P2: " + vtl[0] + ";");
        }
        String brp = "";
        if (onu.getVlanTranslate() != null) {
            for (String vtp : onu.getVlanTranslate()) {
                if (vtp.matches(".*VEIP.*")) {
                    cbVtpVeip.setSelectedItem(vtp.substring(vtp.indexOf("(") + 1, vtp.indexOf(")")));
                }
                if (vtp.matches(".*IPHOST.*")) {
                    cbVtpIpHost.setSelectedItem(vtp.substring(vtp.indexOf("(") + 1, vtp.indexOf(")")));
                }
                if (!vtp.matches(".*IPHOST.*") && !vtp.matches(".*VEIP.*")) {
                    brp = brp.concat("P" + vtp + ";");
                }
            }
        }
        if (brp.matches(".*P1.*") && brp.matches(".*P2.*")) {

            cbVtpPbmp.setSelectedItem(brp);
        } else if (brp.matches(".*P1.*") && !brp.matches(".*P2.*")) {

            cbVtpPbmp.setSelectedItem(brp);
        } else if (!brp.matches(".*P1.*") && brp.matches(".*P2.*")) {

            cbVtpPbmp.setSelectedItem(brp);
        }

    }

    public ONU getOnu() {
        return onu;
    }

}
